<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="css/style.css" rel="stylesheet">



  </head>
  <body>
     <div class="container">
         <div class="row">
             <div class="col-sm-6">
                <h3>Lista contatti</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Cognome</th>
                            <th>Nome</th>
                            <th>Telefono</th>
                        </tr>
                    </thead>

                    <tbody id="tb_contatti">

                    </tbody>
                </table>
            </div>

            <div class="col-sm-3">
                <h3>Scheda contatto</h3>
                <table id="dettaglio">
                    <input type="hidden" name="id" id="dettaglio_id" />
                    <tr><td>Cognome</td><td><input type="text" id="dettaglio_cognome" /></td></tr>
                    <tr><td>Nome</td><td><input type="text" id="dettaglio_nome" /></td></tr>
                    <tr><td>Telefono</td><td><input type="text" id="dettaglio_telefono" /></td></tr>
                    <tr><td><input type="button" value="Salva" onclick="salva();" />
                </table>
            </div>
    </div>
    <script type="text/javascript" src="js/persone.js"></script>
    <script type="text/javascript">
        for (i = 0;i<iphone7.length; i++){
            var obj = iphone7[i];
            var tr = document.createElement("tr");

            var td1 = document.createElement("td");
            var td2 = document.createElement("td");
            var td3 = document.createElement("td");
            var td4 = document.createElement("td");

            td1.innerHTML = obj.cognome;
            td2.innerHTML = obj.nome;
            td3.innerHTML = obj.telefono;
            td4.innerHTML = '<a href="javascript:;" onclick="vediDettaglio('+i+')">modifica</a>';

            td1.setAttribute("id", "cognome_"+obj.id);
            td2.setAttribute("id", "nome_"+obj.id);
            td3.setAttribute("id", "telefono_"+obj.id);

            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td3);
            tr.appendChild(td4);

            //console.log(tr);
            document.getElementById("tb_contatti").appendChild(tr);
        }

        function vediDettaglio(i){
            var obj = iphone7[i];
            console.log(i, obj);
            document.getElementById("dettaglio_id").value = obj.id;
            document.getElementById("dettaglio_cognome").value = obj.cognome;
            document.getElementById("dettaglio_nome").value = obj.nome;
            document.getElementById("dettaglio_telefono").value = obj.telefono;

            document.getElementById("dettaglio").setAttribute("style", 'display: block;');
        }


        function salva(){
            var id = document.getElementById("dettaglio_id").value;
            console.log(id, document.getElementById("nome_"+id));
            document.getElementById("nome_"+id).innerHTML = document.getElementById("dettaglio_nome").value;
            document.getElementById("cognome_"+id).innerHTML = document.getElementById("dettaglio_cognome").value;
            document.getElementById("telefono_"+id).innerHTML = document.getElementById("dettaglio_telefono").value;

        }
    </script>
  </body>
</html>
